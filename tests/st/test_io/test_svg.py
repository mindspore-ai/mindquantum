# -*- coding: utf-8 -*-
# Copyright 2021 Huawei Technologies Co., Ltd
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# wITHOUT wARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
# ============================================================================
"""Test svg."""
from mindquantum import qft, BarrierGate, RX

def test_svg():
    """
    Description: Test svg default style.
    Expectation: success.
    """
    text = (qft(range(3))+RX({'a':1.2}).on(1)+BarrierGate()).measure_all().svg()._repr_svg_()
    text_exp = """<svg xmlns="http://www.w3.org/2000/svg" width="752.64" height="230.0">\n<rect x="20" y="10" width="716.8" height="200" fill="#ffffff" />\n<text x="40.0" y="50.0" font-size="16px" dominant-baseline="middle" text-anchor="start" font-family="Arial" font-weight="normal" fill="#252b3a" >\nq0:\n </text>\n<text x="40.0" y="110.0" font-size="16px" dominant-baseline="middle" text-anchor="start" font-family="Arial" font-weight="normal" fill="#252b3a" >\nq1:\n </text>\n<text x="40.0" y="170.0" font-size="16px" dominant-baseline="middle" text-anchor="start" font-family="Arial" font-weight="normal" fill="#252b3a" >\nq2:\n </text>\n<line x1="68.8" x2="716.8" y1="50.0" y2="50.0" stroke="#adb0b8" stroke-width="1" />\n<line x1="68.8" x2="716.8" y1="110.0" y2="110.0" stroke="#adb0b8" stroke-width="1" />\n<line x1="68.8" x2="716.8" y1="170.0" y2="170.0" stroke="#adb0b8" stroke-width="1" />\n\n<rect x="92.8" y="30.0" width="40.0" height="40" rx="4" ry="4" stroke="#ffffff" stroke-width="0" fill="#5e7ce0" fill-opacity="1" />\n<text x="112.8" y="50.0" font-size="20px" dominant-baseline="middle" text-anchor="middle" font-family="Arial" font-weight="normal" fill="#ffffff" >\nH\n </text>\n\n<circle cx="172.8" cy="110.0" r="4" fill="#fac209" />\n<line x1="172.8" x2="172.8" y1="50.0" y2="110.0" stroke="#fac209" stroke-width="3" />\n<rect x="152.8" y="30.0" width="40.0" height="40" rx="4" ry="4" stroke="#ffffff" stroke-width="0" fill="#fac209" fill-opacity="1" />\n<text x="172.8" y="46.0" font-size="20px" dominant-baseline="middle" text-anchor="middle" font-family="Arial" font-weight="normal" fill="#ffffff" >\nPS\n </text>\n<text x="172.8" y="62.0" font-size="14.0px" dominant-baseline="middle" text-anchor="middle" font-family="Arial" font-weight="normal" fill="#ffffff" >\nπ/2\n </text>\n\n<circle cx="232.8" cy="170.0" r="4" fill="#fac209" />\n<line x1="232.8" x2="232.8" y1="50.0" y2="170.0" stroke="#fac209" stroke-width="3" />\n<rect x="212.8" y="30.0" width="40.0" height="40" rx="4" ry="4" stroke="#ffffff" stroke-width="0" fill="#fac209" fill-opacity="1" />\n<text x="232.8" y="46.0" font-size="20px" dominant-baseline="middle" text-anchor="middle" font-family="Arial" font-weight="normal" fill="#ffffff" >\nPS\n </text>\n<text x="232.8" y="62.0" font-size="14.0px" dominant-baseline="middle" text-anchor="middle" font-family="Arial" font-weight="normal" fill="#ffffff" >\nπ/4\n </text>\n\n\n<rect x="272.8" y="90.0" width="40.0" height="40" rx="4" ry="4" stroke="#ffffff" stroke-width="0" fill="#5e7ce0" fill-opacity="1" />\n<text x="292.8" y="110.0" font-size="20px" dominant-baseline="middle" text-anchor="middle" font-family="Arial" font-weight="normal" fill="#ffffff" >\nH\n </text>\n\n<circle cx="352.8" cy="170.0" r="4" fill="#fac209" />\n<line x1="352.8" x2="352.8" y1="110.0" y2="170.0" stroke="#fac209" stroke-width="3" />\n<rect x="332.8" y="90.0" width="40.0" height="40" rx="4" ry="4" stroke="#ffffff" stroke-width="0" fill="#fac209" fill-opacity="1" />\n<text x="352.8" y="106.0" font-size="20px" dominant-baseline="middle" text-anchor="middle" font-family="Arial" font-weight="normal" fill="#ffffff" >\nPS\n </text>\n<text x="352.8" y="122.0" font-size="14.0px" dominant-baseline="middle" text-anchor="middle" font-family="Arial" font-weight="normal" fill="#ffffff" >\nπ/2\n </text>\n\n\n<rect x="392.8" y="150.0" width="40.0" height="40" rx="4" ry="4" stroke="#ffffff" stroke-width="0" fill="#5e7ce0" fill-opacity="1" />\n<text x="412.8" y="170.0" font-size="20px" dominant-baseline="middle" text-anchor="middle" font-family="Arial" font-weight="normal" fill="#ffffff" >\nH\n </text>\n\n<line x1="472.8" x2="472.8" y1="30.0" y2="190.0" stroke-width="3" stroke="#16acff" />\n\n<rect x="452.8" y="30.0" width="40" height="40" rx="4" ry="4" fill="#16acff" fill-opacity="1" stroke="#ffffff" stroke-width="0" />\n<path d="M 463.2 46.31384387633061 L 468.0 38.0 L 472.8 46.31384387633061 L 469.44 46.31384387633061 L 469.44 62.0 L 466.56 62.0 L 466.56 46.31384387633061 Z" fill="#ffffff" />\n<path d="M 482.40000000000003 53.68615612366939 L 477.6 62.0 L 472.8 53.68615612366939 L 476.16 53.68615612366939 L 476.16 38.0 L 479.04 38.0 L 479.04 53.68615612366939 Z" fill="#ffffff" />\n<rect x="452.8" y="150.0" width="40" height="40" rx="4" ry="4" fill="#16acff" fill-opacity="1" stroke="#ffffff" stroke-width="0" />\n<path d="M 463.2 166.31384387633062 L 468.0 158.0 L 472.8 166.31384387633062 L 469.44 166.31384387633062 L 469.44 182.0 L 466.56 182.0 L 466.56 166.31384387633062 Z" fill="#ffffff" />\n<path d="M 482.40000000000003 173.68615612366938 L 477.6 182.0 L 472.8 173.68615612366938 L 476.16 173.68615612366938 L 476.16 158.0 L 479.04 158.0 L 479.04 173.68615612366938 Z" fill="#ffffff" />\n\n<rect x="512.8" y="90.0" width="80.0" height="40" rx="4" ry="4" stroke="#ffffff" stroke-width="0" fill="#fac209" fill-opacity="1" />\n<text x="552.8" y="106.0" font-size="20px" dominant-baseline="middle" text-anchor="middle" font-family="Arial" font-weight="normal" fill="#ffffff" >\nRX\n </text>\n<text x="552.8" y="122.0" font-size="14.0px" dominant-baseline="middle" text-anchor="middle" font-family="Arial" font-weight="normal" fill="#ffffff" >\n1.2*a\n </text>\n\n<rect x="612.8" y="30.0" width="20" height="160" fill="gray" fill-opacity="0.8" />\n<rect x="652.8" y="30.0" width="40" height="40" rx="4" ry="4" stroke="#ffffff" stroke-width="0" fill="#ff7272" fill-opacity="1" />\n<circle cx="672.8" cy="60.4" r="1.6" fill="#ffffff" />\n<path d="M 660.0 60.4 A 12.8 12.8 0 0 1 685.5999999999999 60.4" stroke="#ffffff" stroke-width="2.4000000000000004" fill-opacity="0" />\n<path d="M 676.9018483174859 43.93539030917347 L 685.2156921938165 39.13539030917347 L 685.2156921938165 48.73539030917347 L 681.8901546432843 46.815390309173466 L 674.0470765814496 60.4 L 672.3843078061834 59.44 L 680.2273858680181 45.85539030917347 Z" fill="#ffffff" />\n<rect x="652.8" y="90.0" width="40" height="40" rx="4" ry="4" stroke="#ffffff" stroke-width="0" fill="#ff7272" fill-opacity="1" />\n<circle cx="672.8" cy="120.4" r="1.6" fill="#ffffff" />\n<path d="M 660.0 120.4 A 12.8 12.8 0 0 1 685.5999999999999 120.4" stroke="#ffffff" stroke-width="2.4000000000000004" fill-opacity="0" />\n<path d="M 676.9018483174859 103.93539030917347 L 685.2156921938165 99.13539030917347 L 685.2156921938165 108.73539030917347 L 681.8901546432843 106.81539030917347 L 674.0470765814496 120.4 L 672.3843078061834 119.44 L 680.2273858680181 105.85539030917347 Z" fill="#ffffff" />\n<rect x="652.8" y="150.0" width="40" height="40" rx="4" ry="4" stroke="#ffffff" stroke-width="0" fill="#ff7272" fill-opacity="1" />\n<circle cx="672.8" cy="180.4" r="1.6" fill="#ffffff" />\n<path d="M 660.0 180.4 A 12.8 12.8 0 0 1 685.5999999999999 180.4" stroke="#ffffff" stroke-width="2.4000000000000004" fill-opacity="0" />\n<path d="M 676.9018483174859 163.93539030917347 L 685.2156921938165 159.13539030917346 L 685.2156921938165 168.73539030917345 L 681.8901546432843 166.81539030917347 L 674.0470765814496 180.4 L 672.3843078061834 179.44 L 680.2273858680181 165.85539030917346 Z" fill="#ffffff" />\n</svg>"""
    assert text == text_exp
