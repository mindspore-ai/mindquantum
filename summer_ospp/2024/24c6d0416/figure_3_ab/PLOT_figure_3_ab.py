import matplotlib.pyplot as plt
import matplotlib.colors as mcolors
import matplotlib.cm as cm
import numpy as np

def success_func(lst):
    count = sum(1 for x in lst if x == 1)
    return count/len(lst)

data = {
    10:[0.968894535655753,1,1,1,1,1,1,1,1,1,1,1,0.996070405432409,1,1,1,0.995251489077555,1,1,1,
        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
        1,1,1,0.991252100893677,1,1,1,1,1,1,1,1,1,1,1,0.974162148862054,1,1,1,1],
    12:[1,0.980165971,1,1,1,1,1,1,1,1,0.903159348,1,1,1,1,1,1,1,1,0.994228417,
        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
        1,1,1,1,1,0.990463896,1,1,1,1,1,1,1,0.965272094,1,1,0.990456851,1,1,1],
    14:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.970026974,1,1,1,1,1,
        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.984437688,1,1,1,
        0.875147484,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,],
    16:[1,1,1,1,1,1,1,1,1,1,0.967829639,1,1,1,1,1,1,1,0.992236271,0.993572327,
        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    18:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.990009191,
        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.965983183,1,1,1,1,
        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.993237351,1,1,1],
    20:[1,1,1,1,1,1,1,1,1,0.97568694,1,0.970432795,1,1,1,1,1,1,1,1,
        1,1,1,1,1,1,1,1,1,0.977936079,1,1,1,1,1,1,1,1,1,1,
        1,1,1,1,1,1,1,0.966346205,1,1,1,1,1,1,1,1,1,1,1,1],
    22:[0.994733085,1,1,1,1,1,0.995965446,1,1,0.991632794,1,1,1,1,1,1,1,1,1,1,
        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
        1,0.98482967,1,1,1,1,0.993292475,1,1,1,1,0.997533982,1,1,1,0.998527221,1,1,1,1],
    24:[1,1,1,0.987145531,1,1,0.992796382,0.972965103,1,1,1,1,1,1,1,1,1,1,1,1,
        1,1,0.999100567,1,1,1,1,0.986742457,1,1,1,0.991650964,1,1,1,0.996422845,1,0.995122596,1,1,
        1,1,1,1,1,1,1,1,1,1,1,1,0.997299168,1,1,1,0.95561991,1,1,1],
    26:[1,1,1,1,1,1,1,1,0.989958102,1,1,1,1,1,0.999631476,1,1,1,1,1,
        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.98228803,1,1,
        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.994404276,1],
    28:[0.993393872,1,1,0.999414923,1,1,1,1,1,1,1,1,1,1,0.962951394,1,1,1,1,0.9806429,
        1,1,1,1,1,1,1,1,1,1,1,1,0.99681724,1,1,1,1,1,1,1,
        0.981176787,0.987056941,1,0.992746318,1,1,1,1,1,0.980602663,1,0.998969674,1,1,1,1,1,1,1,1],
    30:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
        1,0.931057293,1,1,1,1,1,1,1,1,1,1,1,0.988418499,1,1,1,1,1,1,
        1,1,1,0.989264592,1,1,1,0.991895901,1,1,1,1,1,1,1,1,1,1,1,1]
}

nodes = list(range(10, 31, 2))
y_averages = [np.mean(data[node]) for node in nodes]
y_data = [y for values in data.values() for y in values]
x_data = [node for node in nodes for _ in data[node]]

plt.figure(figsize=(8, 6), dpi=120, facecolor='lightgray')
distances = [abs(y - y_averages[nodes.index(x)]) for x, y in zip(x_data, y_data)]
norm = plt.Normalize(min(distances), max(distances))
cmap = mcolors.LinearSegmentedColormap.from_list('black_white', ['black', 'white'])
plt.plot(nodes, y_averages, marker='o', linestyle='-', color='#E65100')
plt.xticks(nodes)
scatter = plt.scatter(x_data, y_data, c=distances, cmap=cmap, norm=norm, edgecolor='k')
plt.xlabel('Numbers of nodes', fontsize=16)
plt.ylabel('Approximation ratio', fontsize=16)
plt.tight_layout()
plt.show()


rate_list = [success_func(lst) for lst in list(data.values())]

plt.figure(figsize=(8, 6), dpi=120, facecolor='lightgray')
plt.bar(nodes, rate_list, color='#E65100', edgecolor='black')
plt.xticks([10,15,20,25,30])
plt.yticks([0.75,1.00])
plt.xlabel('Numbers of nodes', fontsize=16)
plt.ylabel('Success rate', fontsize=16)
plt.tight_layout()
plt.show()